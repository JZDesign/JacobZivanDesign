<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Jacob Zivan Design"/><link rel="canonical" href="https://JacobZivanDesign.com/technology/never-miss-a-localized-string"/><meta name="twitter:url" content="https://JacobZivanDesign.com/technology/never-miss-a-localized-string"/><meta name="og:url" content="https://JacobZivanDesign.com/technology/never-miss-a-localized-string"/><title>Never Miss a Localized String Value Again | Jacob Zivan Design</title><meta name="twitter:title" content="Never Miss a Localized String Value Again | Jacob Zivan Design"/><meta name="og:title" content="Never Miss a Localized String Value Again | Jacob Zivan Design"/><meta name="description" content="Managing localized strings can be difficult. But, there are some tools on how to manage localized strings in iOS to make sure we don't royally mess things up. In this article, we'll cover how to utilize compile time checks and prevent errors with localized strings."/><meta name="twitter:description" content="Managing localized strings can be difficult. But, there are some tools on how to manage localized strings in iOS to make sure we don't royally mess things up. In this article, we'll cover how to utilize compile time checks and prevent errors with localized strings."/><meta name="og:description" content="Managing localized strings can be difficult. But, there are some tools on how to manage localized strings in iOS to make sure we don't royally mess things up. In this article, we'll cover how to utilize compile time checks and prevent errors with localized strings."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Jacob Zivan Design"/><meta name="twitter:image" content="https://JacobZivanDesign.com/images/social.jpg"/><meta name="og:image" content="https://JacobZivanDesign.com/images/social.jpg"/></head><body class="item-page"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({ startOnLoad: true });</script><!--ITEM HTML--><header><div class="wrapper"><a class="site-icon" href="/"><img src="/images/memoji.png" alt="Memoji of Jacob giving a thumbs up"/></a><nav><ul><li><a class="selected" href="/technology">Technology</a></li><li><a href="/foresight">Foresight</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Never Miss a Localized String Value Again</h1><p>Have you ever had this happen to you? You're testing out a feature in your app, some other team members were recently moving things around and cleaning things up, and you notice that the text on your screen is‚Ä¶ odd. It's not english anymore. It's a string key, something that says: <code>"FEED_PAGE_TITLE_SIGNED_IN"</code> instead of <code>"Your Feed"</code>.</p><p>Well‚Ä¶ that wasn't like that last week‚Ä¶ how did that happen? And as you dig, you realize the error, the team moved the strings to a different bundle and now your reference to the localized string is nil.</p><p>If only the compiler would have caught that for you‚Ä¶</p><br/><h2><code>String.LocalizedValue</code> to the rescue</h2><p>I've got some good news for you. If you never want to run into this again, you can use an enum inside of a Swift Package to fix this for you.</p><p>It's quite simple. In a Swift Package that has a default localization set, any <code>LocalizedStringKey</code> or <code>String.LocalizationValue</code> symbols will automatically create entries in a String Catalogue. Then, you can reference that symbol instead of a magic string, and if your team moves things around, the compiler will check your work and save your hide.</p><br/><h2>Setting up a Swift Package</h2><p>First things first, you need a Swift Package to host your code. Make a directory called "StringExample" and start a Swift Package in that directory with the same name. Then in the <code>Package.swift</code> file, add the <code>defaultLocalization</code> property like so:</p><pre><code><span class="keyword">let</span> package = <span class="type">Package</span>(
    name: <span class="string">"StringExample"</span>,
    defaultLocalization: <span class="string">"en"</span>, <span class="comment">// ADD THIS LINE</span>
    platforms: [.<span class="call">iOS</span>(.<span class="dotAccess">v15</span>), .<span class="dotAccess">macOS</span>(.<span class="dotAccess">v12</span>)], <span class="comment">// Ensure minimum versions are set</span>
    products: [ <span class="comment">/* Leave this alone */</span> ],
    targets: [ <span class="comment">/* Leave this alone */</span> ]
)
</code></pre><p>Then, inside of the source directory, add a new "String Catalogue" file.</p><br/><h2>Creating the enum</h2><p>When you have that ready, what we need to do is create the symbols that we can reference in our code to prevent that debacle I described above. Go ahead and open the <code>StringExample.swift</code> file, and add the following code:</p><pre><code><span class="keyword">import</span> Foundation

<span class="keyword">public enum</span> Strings {
    <span class="keyword">public enum</span> Home: <span class="type">String</span>.<span class="type">LocalizationValue</span> {
        <span class="keyword">case</span> title = <span class="string">"HOME_TITLE"</span>
    }
}
</code></pre><p>After that, you can build the package by hitting CMD + B ‚Äî When it's complete, open up the String Catalogue. There you will notice a string entry with the key <code>HOME_TITLE</code> and an empty value.</p><p>Now that it's there, it won't delete the key unless you delete the enum case or change the raw value. That means you can add a localized value in that String Catalogue, and you're on your way to having a stable localization setup.</p><p>Go ahead and set the value to something simple, like: "Your Feed"</p><br/><h2>Getting the localized strings</h2><p>Now that you have an enum with the keys in there, you still aren't able to get the localized values yet. Let's make a protocol that helps us with this. In the same file, write the following code:</p><pre><code><span class="keyword">public protocol</span> AutoLocalizing {
    <span class="keyword">var</span> rawValue: <span class="type">String</span>.<span class="type">LocalizationValue</span> { <span class="keyword">get</span> }
}

<span class="keyword">public extension</span> <span class="type">AutoLocalizing</span> {
    <span class="keyword">func</span> callAsFunction() -&gt; <span class="type">String</span> {
        <span class="type">String</span>(localized: rawValue, bundle: .<span class="dotAccess">module</span>)
    }
}
</code></pre><p>After you've done that, conform your <code>Home</code> enum to <code>AutoLocalizing</code> like so:</p><pre><code><span class="keyword">public enum</span> Home: <span class="type">String</span>.<span class="type">LocalizationValue</span>, <span class="type">AutoLocalizing</span> { <span class="comment">/* Leave alone */</span> }
</code></pre><p>Finally, when you've done that, you can reference the strings by the enum and get them localized in a flash. That will look something like this:</p><pre><code><span class="keyword">let</span> x: <span class="type">String</span> = <span class="type">Strings</span>.<span class="type">Home</span>.<span class="call">title</span>()
</code></pre><br/><h2>Wrapping up</h2><p>Now you won't have to worry about those human issues with strings getting relocated because the compiler will complain the moment the symbol needs to be imported. We can go even further and write automated tests to ensure that there are values set too! Conform the enum to <code>CaseIterable</code> and assert that the key <code>!=</code> the localized value for each case. All you need to do is run the assertion for each enum and localization. Short and sweet.</p><h3>üî•‚òùÔ∏è Sample code up <a href="https://github.com/JZDesign/AutoLocalizingExample">here.</a></h3></div><span>Tags: </span><ul class="tag-list"><li><a href="/tags/technology">Technology</a></li><li><a href="/tags/tips">Tips</a></li><li><a href="/tags/workflow">Workflow</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/localization">Localization</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/string-catalogue">String Catalogue</a></li></ul></article></div><footer><br/><div class="center">
    <p><sm>
    If you enjoy the content on my site and want to support my writing, you can donate <a href="https://ko-fi.com/jacobzivandesign" target="blank">here</a> or <a href="https://github.com/sponsors/JZDesign" target="blank">here.</a>
    </p></sm>
    <p><sm>
    Or if you're a <a href="https://wallet.proton.me" target="blank">Proton Wallet</a> user, you can send coin to donate@jacobzivandesign.com
    </p></sm>
</div><br/><br/><p class="jbmono">Code typeface == <a href="https://www.jetbrains.com/lp/mono/">JetBrains Mono</a></p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p><div class="social"><a target="_blank" class="find-me" href="https://github.com/JZDesign/"><img src="/images/git.svg"/></a><a target="_blank" class="find-me" href="https://bsky.app/profile/jacobzivandesign.bsky.social"><img src="/images/bsky.svg"/></a><a target="_blank" class="find-me" href="https://x.com/JZivanDesign"><img src="/images/x-logo.svg"/></a><a target="_blank" class="find-me" href="https://mastodon.social/@jacobzivandesign"><img src="/images/mastodon.svg"/></a><a target="_blank" class="find-me" href="https://www.linkedin.com/in/jacob-rakidzich-b8722436/"><img src="/images/linkedin.svg"/></a></div><br/></footer></body></html>
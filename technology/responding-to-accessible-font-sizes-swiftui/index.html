<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Jacob Zivan Design"/><link rel="canonical" href="https://JacobZivanDesign.com/technology/responding-to-accessible-font-sizes-swiftui"/><meta name="twitter:url" content="https://JacobZivanDesign.com/technology/responding-to-accessible-font-sizes-swiftui"/><meta name="og:url" content="https://JacobZivanDesign.com/technology/responding-to-accessible-font-sizes-swiftui"/><title>Responsive View Components | Jacob Zivan Design</title><meta name="twitter:title" content="Responsive View Components | Jacob Zivan Design"/><meta name="og:title" content="Responsive View Components | Jacob Zivan Design"/><meta name="description" content="A Tutorial for Handling Accessibility in SwiftUI using a ViewBuilder, PreferredFont, and ContentSizeCategory.isAccessibilityCategory"/><meta name="twitter:description" content="A Tutorial for Handling Accessibility in SwiftUI using a ViewBuilder, PreferredFont, and ContentSizeCategory.isAccessibilityCategory"/><meta name="og:description" content="A Tutorial for Handling Accessibility in SwiftUI using a ViewBuilder, PreferredFont, and ContentSizeCategory.isAccessibilityCategory"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Jacob Zivan Design"/><meta name="twitter:image" content="https://JacobZivanDesign.com/images/memoji.png"/><meta name="og:image" content="https://JacobZivanDesign.com/images/memoji.png"/></head><body class="item-page"><!--ITEM HTML--><header><div class="wrapper"><a class="site-icon" href="/"><img src="/images/memoji.png" alt="Memoji of Jacob giving a thumbs up"/></a><nav><ul><li><a href="/musings">Musings</a></li><li><a class="selected" href="/technology">Technology</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Responsive View Components</h1><p>I used to write my iOS views to be pixel perfect, until I discovered UIKit's <a href="https://developer.apple.com/documentation/uikit/uifont/1619030-preferredfont">Preferred Font</a> method and how it worked. After that, I struggled to implement views that were useful at scale, or even beautiful, on smaller screens like that of the iPhone 8. Eventually I designed a UIKit component that accounted for accessible font sizes. In this article we'll remake that component in SwiftUI.</p><br/><h2>The Problem</h2><img class="left-item" style="max-width: 300px; margin-right: 2rem;" alt="A debit card transaction represented in an HStack" src="../../images/hstack_default_size.png"/><br/><br/><br/><br/><br/><br/><p>We have a layout that works perfectly in a SwiftUI <code>HStack</code>. This view contains one <code>Image</code> and two <code>Text</code> views. Looks great right?</p><p>Well...</p><p>Let's look at it after bumping our preferred font size.</p><br/><img class="right-item" style="max-width: 300px; margin-left: 2rem;" alt="A debit card transaction represented in an HStack with very large font" src="../../images/hstack_large_size.png"/><span class="clear-left"></span><h3>Nope!</h3><br/><p>That looks like garbage. We need to respond to the font size increase, and change the layout of this component.</p><p>Good news is, the SwiftUI team has given us easy access to the user's preferred font size.</p><span class="clearfix"></span><br/><h2>Responsive Stack View</h2><p>For this tutorial, we'll focus on a simple view that responds to accessible font sizes. To do that we'll use the <a href="https://developer.apple.com/documentation/swiftui/contentsizecategory"><code>ContentSizeCategory</code></a> Environment variable in SwiftUI.</p><p>On it, there is a computed property, <code>isAccessibilityCategory</code>, that returns what we're looking for. If the user has selected to use large fonts <strong>and</strong> has scaled their font up into the larger fonts category, <code>isAccessibilityCategory</code> returns <code>true</code>.</p><p>We can add use it like this:</p><pre><code><span class="keyword">public struct</span> SomeView : <span class="type">AccessibleView</span> {
    <span class="keyword">@Environment</span>(\.<span class="property">sizeCategory</span>) <span class="keyword">public var</span> size: <span class="type">ContentSizeCategory</span>

    <span class="keyword">public var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="keyword">if</span> size.<span class="property">isAccessibilityCategory</span> {
            <span class="type">Text</span>(<span class="string">"isAccessibilityCategory == true"</span>)
        } <span class="keyword">else</span> {
            <span class="type">Text</span>(<span class="string">"isAccessibilityCategory == false"</span>)
        }
    }
}
</code></pre><br/><br/><br/><h3>That's great! But how do I pass in the content I want?</h3><br/><br/><p>To make our own stack view we'll need to be able to pass in a bunch of subviews. We can do this with a <code>ViewBuilder</code>.</p><p><em>A <a href="https://developer.apple.com/documentation/swiftui/viewbuilder">ViewBuilder</a> is a <a href="https://docs.swift.org/swift-book/LanguageGuide/Properties.html#ID617">property wrapper</a> that allows us to pass one or more views into our stack view as a function.</em></p><p>Alright! Let's put the Responsive Stack View together using the <code>ContentSizeCategory</code> and a <code>ViewBuilder</code>!</p><pre><code><span class="keyword">struct</span> RStack&lt;Content: <span class="type">View</span>&gt; : <span class="type">View</span> {
    <span class="keyword">@Environment</span>(\.<span class="property">sizeCategory</span>) <span class="keyword">var</span> size: <span class="type">ContentSizeCategory</span>
    
    <span class="keyword">let</span> content: () -&gt; <span class="type">Content</span>
    
    <span class="keyword">init</span>(<span class="keyword">@ViewBuilder</span> content: <span class="keyword">@escaping</span> () -&gt; <span class="type">Content</span>) {
        <span class="keyword">self</span>.<span class="property">content</span> = content
    }
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="keyword">if</span> size.<span class="property">isAccessibilityCategory</span> {
            <span class="type">VStack</span> { <span class="call">content</span>() }
        } <span class="keyword">else</span> {
            <span class="type">HStack</span> { <span class="call">content</span>() }
        }
    }
}
</code></pre><br/><br/><h3>Let's see what it looks like!</h3><br/><img class="left-item" style="max-width: 300px;" alt="A debit card transaction represented in an RStack" src="../../images/rstack_default.png"/><br/><br/><br/><br/><p>Notice how the <code>RStack</code> has the same syntax of the <code>HStack</code> and <code>VStack</code>? That's the <code>ViewBuilder</code> doing it's magic.</p><br/><pre><code><span class="keyword">struct</span> ContentView: <span class="type">View</span> {
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">RStack</span> {
            <span class="type">Image</span>(systemName: <span class="string">"creditcard.fill"</span>)
                .<span class="call">foregroundColor</span>(.<span class="dotAccess">red</span>)
                .<span class="call">padding</span>(.<span class="dotAccess">trailing</span>)
            
            <span class="type">Text</span>(<span class="string">"Joe's Coffee Shop"</span>)
            <span class="type">Spacer</span>()
            <span class="type">Text</span>(<span class="string">"$2.34"</span>)
        }.<span class="call">padding</span>()
    }
}
</code></pre><br/><img class="right-item" style="max-width: 300px; margin-left: 2rem;" alt="A debit card transaction represented in an RStack with a spacer and very large font" src="../../images/rstack_spacer.png"/><br/><span class="clear-left"></span><br/><br/><br/><h3>Much Better!</h3><br/><p>We're getting closer! Although, that spacer is a bit of a problem...</p><p>Let's make another component to handle that little detail. After all, practice makes permanent.</p><p>For this component, we want to make sure we add a spacer for a horizontal layout, but not a vertical layout. We won't need to use a <code>ViewBuilder</code> because we are only going to be working with 2 <code>Text</code> views.</p><p>Let's do it!</p><span class="clearfix"></span><h3>Practice makes permanent</h3><br/><pre><code><span class="keyword">struct</span> RDualText: <span class="type">View</span> {
    <span class="keyword">@Environment</span>(\.<span class="property">sizeCategory</span>) <span class="keyword">var</span> size: <span class="type">ContentSizeCategory</span>

    <span class="keyword">var</span> firstText: <span class="type">Text</span>
    <span class="keyword">var</span> secondText: <span class="type">Text</span>
    <span class="keyword">var</span> spacer = <span class="type">Spacer</span>()
    
    <span class="keyword">init</span>(firstText: <span class="type">Text</span>, secondText: <span class="type">Text</span>) {
        <span class="keyword">self</span>.<span class="property">firstText</span> = firstText
        <span class="keyword">self</span>.<span class="property">secondText</span> = secondText
    }
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">RStack</span> {
            <span class="keyword">self</span>.<span class="property">firstText</span>
            <span class="keyword">if</span> !size.<span class="property">isAccessibilityCategory</span> {
                spacer
            }
            <span class="keyword">self</span>.<span class="property">secondText</span>
        }
    }
}
</code></pre><br/><br/><h3>Putting it all together</h3><br/><p>Alright, let's go back to our content view, and use our new component.</p><img class="left-item" style="max-width: 300px;" alt="A debit card transaction represented in an RStack" src="../../images/rstack_large.png"/><br/><br/><br/><br/><br/><pre><code><span class="keyword">struct</span> ContentView: <span class="type">View</span> {
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">RStack</span> {
            <span class="type">Image</span>(systemName: <span class="string">"creditcard.fill"</span>)
                .<span class="call">foregroundColor</span>(.<span class="dotAccess">red</span>)
            <span class="type">RDualText</span>(
                firstText: <span class="type">Text</span>(<span class="string">"Joe's Coffee Shop"</span>),
                secondText: <span class="type">Text</span>(<span class="string">"$2.34"</span>)
            )
        }.<span class="call">padding</span>()
    }
}
</code></pre><span class="clearfix"></span><br/><h2>Accessible apps don't have to be ugly.</h2><p>Making a component that accounts for a user's accessibility settings was far more difficult in the world of UIKit. But we've only scratched the surface, there is a lot more to handling accessibility well than what we covered here.</p></div><span>Tags: </span><ul class="tag-list"><li><a href="/tags/accessibility">Accessibility</a></li><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/swiftui">SwiftUI</a></li><li><a href="/tags/technology">Technology</a></li><li><a href="/tags/tutorial">Tutorial</a></li><li><a href="/tags/uiux">UI/UX</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p class="jbmono">Code typeface == <a href="https://www.jetbrains.com/lp/mono/">JetBrains Mono</a></p><p><a href="/feed.rss">RSS feed</a></p><div class="social"><a target="_blank" class="find-me" href="https://github.com/JZDesign/"><img src="/images/git.svg"/></a><a target="_blank" class="find-me" href="https://www.linkedin.com/in/jacob-rakidzich-b8722436/"><img src="/images/linkedin.svg"/></a></div></footer></body></html>
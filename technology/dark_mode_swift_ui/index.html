<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Jacob Zivan Design"/><link rel="canonical" href="https://JacobZivanDesign.com/technology/dark_mode_swift_ui"/><meta name="twitter:url" content="https://JacobZivanDesign.com/technology/dark_mode_swift_ui"/><meta name="og:url" content="https://JacobZivanDesign.com/technology/dark_mode_swift_ui"/><title>Handling Dark Mode Elegantly in SwiftUI | Jacob Zivan Design</title><meta name="twitter:title" content="Handling Dark Mode Elegantly in SwiftUI | Jacob Zivan Design"/><meta name="og:title" content="Handling Dark Mode Elegantly in SwiftUI | Jacob Zivan Design"/><meta name="description" content="Sharing dark mode capable colors in SwiftUI using @Environment(\.colorScheme), protocols, and extensions. Forget UITraitCollection.userInterfaceStyle. Learn how to create shareable, responsive colors using computed properties in SwiftUI."/><meta name="twitter:description" content="Sharing dark mode capable colors in SwiftUI using @Environment(\.colorScheme), protocols, and extensions. Forget UITraitCollection.userInterfaceStyle. Learn how to create shareable, responsive colors using computed properties in SwiftUI."/><meta name="og:description" content="Sharing dark mode capable colors in SwiftUI using @Environment(\.colorScheme), protocols, and extensions. Forget UITraitCollection.userInterfaceStyle. Learn how to create shareable, responsive colors using computed properties in SwiftUI."/><meta name="fediverse:creator" content="@jacobzivandesign@mastodon.social"/><meta twitter:site="@JZivanDesign"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Jacob Zivan Design"/><meta name="twitter:image" content="https://JacobZivanDesign.com/images/social.jpg"/><meta name="og:image" content="https://JacobZivanDesign.com/images/social.jpg"/></head><body class="item-page"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({ startOnLoad: true });</script><!--ITEM HTML--><header><div class="wrapper"><a class="site-icon" href="/"><img src="/images/memoji.png" alt="Memoji of Jacob giving a thumbs up"/></a><nav><ul><li><a class="selected" href="/technology">Technology</a></li><li><a href="/foresight">Foresight</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Handling Dark Mode Elegantly in SwiftUI</h1><p>In SwiftUI, handling dark mode was made to be easy. The guys over at Apple thought things through and included the user's preferred color scheme as an <a href="https://developer.apple.com/documentation/swiftui/environmentvalues">environment value</a>:</p><p><strong><code>@Environment(\.colorScheme)</code></strong></p><p>It's used like so:</p><br/><pre><code><span class="keyword">struct</span> DarkModeView: <span class="type">View</span> {
    <span class="keyword">@Environment</span>(\.<span class="property">colorScheme</span>) <span class="keyword">var</span> colorScheme: <span class="type">ColorScheme</span>

    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">Text</span>(<span class="string">"Hi"</span>)
            .<span class="call">foregroundColor</span>(colorScheme == .<span class="dotAccess">dark</span> ? .<span class="dotAccess">white</span> : .<span class="dotAccess">black</span>)
    }
}
</code></pre><br/><p>In the example above, we simply apply the <a href="https://www.hackingwithswift.com/sixty/3/7/the-ternary-operator">ternary operator</a> where we assign the color value. If it's <code>.dark</code> we return <code>.white</code>, if not we return <code>.black</code>. Usually, we need to handle more than one color in a view, so let's do it a few more times.</p><br/><pre><code><span class="keyword">struct</span> DarkModeView: <span class="type">View</span> {
    <span class="keyword">@Environment</span>(\.<span class="property">colorScheme</span>) <span class="keyword">var</span> colorScheme: <span class="type">ColorScheme</span>

    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="type">Text</span>(<span class="string">"Hi dude"</span>)
                .<span class="call">foregroundColor</span>(colorScheme == .<span class="dotAccess">dark</span> ? .<span class="dotAccess">white</span> : .<span class="dotAccess">black</span>)

            <span class="type">Button</span>(<span class="string">"Dude, this is neat"</span>) { <span class="call">print</span>(<span class="string">"neat"</span>) }
                .<span class="call">foregroundColor</span>(colorScheme == .<span class="dotAccess">dark</span> ? .<span class="dotAccess">white</span> : .<span class="dotAccess">black</span>)

            <span class="type">Text</span>(<span class="string">"Totally neat."</span>)
                .<span class="call">foregroundColor</span>(colorScheme == .<span class="dotAccess">dark</span> ? .<span class="dotAccess">white</span> : .<span class="dotAccess">black</span>)

        }.<span class="call">background</span>(colorScheme == .<span class="dotAccess">dark</span> ? <span class="type">Color</span>.<span class="property">black</span> : <span class="type">Color</span>.<span class="property">white</span>)
    }
}
</code></pre><br/><p>That can get old pretty fast. Not only is it a lot to write, but the duplication leaves room for human error. If we chose to change the colors we'd need to change code in many locations. If done properly, we could change just one line of code. Instead of duplicating the color computation all over the place, let's use a computed property to handle that logic in one spot.</p><br/><pre><code><span class="keyword">struct</span> DarkModeView: <span class="type">View</span> {
    <span class="keyword">@Environment</span>(\.<span class="property">colorScheme</span>) <span class="keyword">var</span> colorScheme: <span class="type">ColorScheme</span>

    <span class="keyword">var</span> fontColor: <span class="type">Color</span> {
        colorScheme == .<span class="dotAccess">dark</span> ? .<span class="dotAccess">white</span> : .<span class="dotAccess">black</span>
    }

    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="type">Text</span>(<span class="string">"Hi"</span>)
                .<span class="call">foregroundColor</span>(fontColor)

            <span class="type">Button</span>(<span class="string">"Dude, this is neat"</span>) { <span class="call">print</span>(<span class="string">"neat"</span>) }
                .<span class="call">foregroundColor</span>(fontColor)

            <span class="type">Text</span>(<span class="string">"Totally neat."</span>)
                .<span class="call">foregroundColor</span>(fontColor)
        }
    }
}
</code></pre><br/><p>Nice! That works pretty well. Unfortunately, that font color declaration is only included in this view. To solve that and share dark mode friendly colors, we'll make a protocol that handles that.</p><br/><pre><code><span class="keyword">protocol</span> Themeable {
    <span class="keyword">var</span> colorScheme: <span class="type">ColorScheme</span> { <span class="keyword">get</span> }
}
</code></pre><br/><p>This defines an interface of a <code>Themeable</code> object, but it does nothing to share the colors. In Swift, we are unable to define anything but the interface in a protocol's declaration, but we <strong>can</strong> extend protocols to contain functions, static variables, and computed properties.</p><br/><pre><code><span class="keyword">extension</span> <span class="type">Themeable</span> {
    <span class="keyword">var</span> fontColor: <span class="type">Color</span> {
        colorScheme == .<span class="dotAccess">dark</span> ? .<span class="dotAccess">white</span> : .<span class="dotAccess">black</span>
    }
}
</code></pre><br/><p>With that in place, we can modify the <code>DarkModeView</code> that we created earlier. We can also use the new protocol to <em>share</em> <code>fontColor</code> in other views! Check it out:</p><br/><pre><code><span class="keyword">struct</span> DarkModeView: <span class="type">View</span>, <span class="type">Themeable</span> {
    <span class="keyword">@Environment</span>(\.<span class="property">colorScheme</span>) <span class="keyword">var</span> colorScheme: <span class="type">ColorScheme</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="type">Text</span>(<span class="string">"Hi"</span>)
                .<span class="call">foregroundColor</span>(fontColor)
            
            <span class="type">Button</span>(<span class="string">"Dude, this is neat"</span>) { <span class="call">print</span>(<span class="string">"neat"</span>) }
                .<span class="call">foregroundColor</span>(fontColor)
            
            <span class="type">Text</span>(<span class="string">"Totally neat."</span>)
                .<span class="call">foregroundColor</span>(fontColor)
        }
    }
}

<span class="keyword">struct</span> AnotherDarkModeView: <span class="type">View</span>, <span class="type">Themeable</span> {
    <span class="keyword">@Environment</span>(\.<span class="property">colorScheme</span>) <span class="keyword">var</span> colorScheme: <span class="type">ColorScheme</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">Text</span>(<span class="string">"Pretty Cool!! Right?!"</span>)
            .<span class="call">foregroundColor</span>(fontColor)
    }
}

</code></pre><br/><p>With protocols, extensions, and computed properties, we created a dark mode friendly way to share colors. This method isn't limited to colors and the user's selected color scheme. What other user preferences could you account for in this way? Think about it and try it out on your own!</p><br/></div><span>Tags: </span><ul class="tag-list"><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/macos">MacOS</a></li><li><a href="/tags/swiftui">SwiftUI</a></li><li><a href="/tags/technology">Technology</a></li><li><a href="/tags/tutorial">Tutorial</a></li><li><a href="/tags/uiux">UI/UX</a></li><li><a href="/tags/dark-mode">Dark Mode</a></li></ul></article></div><footer><br/><div class="center">
    <p><sm>
    If you enjoy the content on my site and want to support my writing, you can donate <a href="https://ko-fi.com/jacobzivandesign" target="blank">here</a> or <a href="https://github.com/sponsors/JZDesign" target="blank">here.</a>
    </p></sm>
    <p><sm>
    Or if you're a <a href="https://wallet.proton.me" target="blank">Proton Wallet</a> user, you can send coin to donate@jacobzivandesign.com
    </p></sm>
</div><br/><br/><p class="jbmono">Code typeface == <a href="https://www.jetbrains.com/lp/mono/">JetBrains Mono</a></p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p><div class="social"><a target="_blank" class="find-me" href="https://github.com/JZDesign/"><img src="/images/git.svg"/></a><a target="_blank" class="find-me" href="https://bsky.app/profile/jacobzivandesign.bsky.social"><img src="/images/bsky.svg"/></a><a target="_blank" class="find-me" href="https://x.com/JZivanDesign"><img src="/images/x-logo.svg"/></a><a rel="me" target="_blank" class="find-me" href="https://mastodon.social/@jacobzivandesign"><img src="/images/mastodon.svg"/></a><a target="_blank" class="find-me" href="https://www.linkedin.com/in/jacob-rakidzich-b8722436/"><img src="/images/linkedin.svg"/></a></div><br/></footer></body></html>
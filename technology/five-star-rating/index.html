<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Jacob Zivan Design"/><link rel="canonical" href="https://JacobZivanDesign.com/technology/five-star-rating"/><meta name="twitter:url" content="https://JacobZivanDesign.com/technology/five-star-rating"/><meta name="og:url" content="https://JacobZivanDesign.com/technology/five-star-rating"/><title>A Precise 5 Star Rating with SwiftUI | Jacob Zivan Design</title><meta name="twitter:title" content="A Precise 5 Star Rating with SwiftUI | Jacob Zivan Design"/><meta name="og:title" content="A Precise 5 Star Rating with SwiftUI | Jacob Zivan Design"/><meta name="description" content="SwiftUI 5 Star Rating View Tutorial - Use SwiftUI to make a Star Review component from scratch!"/><meta name="twitter:description" content="SwiftUI 5 Star Rating View Tutorial - Use SwiftUI to make a Star Review component from scratch!"/><meta name="og:description" content="SwiftUI 5 Star Rating View Tutorial - Use SwiftUI to make a Star Review component from scratch!"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Jacob Zivan Design"/><meta name="twitter:image" content="https://JacobZivanDesign.com/images/social.jpg"/><meta name="og:image" content="https://JacobZivanDesign.com/images/social.jpg"/></head><body class="item-page"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({ startOnLoad: true });</script><!--ITEM HTML--><header><div class="wrapper"><a class="site-icon" href="/"><img src="/images/memoji.png" alt="Memoji of Jacob giving a thumbs up"/></a><nav><ul><li><a class="selected" href="/technology">Technology</a></li><li><a href="/foresight">Foresight</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>A Precise 5 Star Rating with SwiftUI</h1><img src="../../images/5star.png" alt="5 star view"/><br/><br/><p>Recently, during some slack time at work, I took a look at a mockup we were showing customers during our discovery interviews. The mockup contained a 5 star rating view. You know the one I'm talking about, they're everywhere. Amazon, Airbnb, Walmart… you name it. To get some practice in SwiftUI, I decided I'd create that view component from scratch.</p><p>I had a few ideas on how to create the view:</p><ol><li>Give a progress view a custom mask.</li><li>Layout 5 stars and mask over the top of them with a rectangle.</li><li>And finally to use Apple's new <a href="https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/">SFSymbols</a> to create a simple version using the full star and half star symbols, but that wasn't going to be precise enough to match the mock up.</li></ol><p>I decided to go with option two: Masking over 5 stars. Though I quickly realized that it wasn't a simple as masking over the collection of the stars. I had forgotten to account for the space between each star! After some thought, I chose to mask each star individually. This is how it works:</p><h2>A 5 point scale</h2><p>Each star needs to represent a portion of the scale. The first star represents 0 to 1, the second 1 to 2 and so on. The simplest solution I could think of was to iterate over an array of stars and create the mask value from <code>rating - index</code> then normalizing it with a floor of 0 and a ceiling of 1.</p><p>For example, if the 5 star rating was 3.6, this is what the mask results would look like:</p><table><thead><tr><th align="right">Star Index</th><th align="right">Mask Value</th><th align="right">After normailzation</th></tr></thead><tbody><tr><td align="right">0</td><td align="right">3.6</td><td align="right">1</td></tr><tr><td align="right">1</td><td align="right">2.6</td><td align="right">1</td></tr><tr><td align="right">2</td><td align="right">1.6</td><td align="right">1</td></tr><tr><td align="right">3</td><td align="right">0.6</td><td align="right">0.6</td></tr><tr><td align="right">4</td><td align="right">0</td><td align="right">0</td></tr></tbody></table><p>After that value is returned, we can use it to mask the star by multiplying the mask ratio by the star's width.</p><p>This is what the individual star's code looks like:</p><pre><code><span class="keyword">struct</span> RatingStar: <span class="type">View</span> {
    <span class="keyword">var</span> rating: <span class="type">CGFloat</span>
    <span class="keyword">var</span> color: <span class="type">Color</span>
    <span class="keyword">var</span> index: <span class="type">Int</span>
    
    
    <span class="keyword">var</span> maskRatio: <span class="type">CGFloat</span> {
        <span class="keyword">let</span> mask = rating - <span class="type">CGFloat</span>(index)
        
        <span class="keyword">switch</span> mask {
        <span class="keyword">case</span> <span class="number">1</span>...: <span class="keyword">return</span> <span class="number">1</span>
        <span class="keyword">case</span> ..&lt;<span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span>
        <span class="keyword">default</span>: <span class="keyword">return</span> mask
        }
    }


    <span class="keyword">init</span>(rating: <span class="type">Decimal</span>, color: <span class="type">Color</span>, index: <span class="type">Int</span>) {
        <span class="comment">// Why decimal? Decoding floats and doubles is not accurate.</span>
        <span class="keyword">self</span>.<span class="property">rating</span> = <span class="type">CGFloat</span>(<span class="type">Double</span>(rating.<span class="property">description</span>) ?? <span class="number">0</span>)
        <span class="keyword">self</span>.<span class="property">color</span> = color
        <span class="keyword">self</span>.<span class="property">index</span> = index
    }


    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">GeometryReader</span> { star <span class="keyword">in</span>
            <span class="type">Image</span>(systemName: <span class="string">"star.fill"</span>)
                .<span class="call">foregroundColor</span>(<span class="keyword">self</span>.<span class="property">color</span>)
                .<span class="call">mask</span>(
                    <span class="type">Rectangle</span>()
                        .<span class="call">size</span>(
                            width: star.<span class="property">size</span>.<span class="property">width</span> * <span class="keyword">self</span>.<span class="property">maskRatio</span>,
                            height: star.<span class="property">size</span>.<span class="property">height</span>
                        )
                    
                )
        }
    }
}
</code></pre><br/><p>Easy right!? Let's lay the code out and see how it looks!</p><p>First, I wanted to separate the background stars and the foreground stars to keep things nice and clean. Next, I decided to put the image into its own view so any updates to it will apply to all locations a star image would be used.</p><pre><code><span class="keyword">public struct</span> FiveStarView: <span class="type">View</span> {
    <span class="keyword">var</span> rating: <span class="type">Decimal</span>
    <span class="keyword">var</span> color: <span class="type">Color</span>
    <span class="keyword">var</span> backgroundColor: <span class="type">Color</span>

    <span class="keyword">public init</span>(
        rating: <span class="type">Decimal</span>,
        color: <span class="type">Color</span> = .<span class="dotAccess">red</span>,
        backgroundColor: <span class="type">Color</span> = .<span class="dotAccess">gray</span>
    ) {
        <span class="keyword">self</span>.<span class="property">rating</span> = rating
        <span class="keyword">self</span>.<span class="property">color</span> = color
        <span class="keyword">self</span>.<span class="property">backgroundColor</span> = backgroundColor
    }

    <span class="keyword">public var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">ZStack</span> {
            <span class="type">BackgroundStars</span>(backgroundColor)
            <span class="type">ForegroundStars</span>(rating: rating, color: color)
        }
    }
}


<span class="keyword">private struct</span> StarImage: <span class="type">View</span> {
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">Image</span>(systemName: <span class="string">"star.fill"</span>)
    }
}


<span class="keyword">private struct</span> BackgroundStars: <span class="type">View</span> {
    <span class="keyword">var</span> color: <span class="type">Color</span>

    <span class="keyword">init</span>(<span class="keyword">_</span> color: <span class="type">Color</span>) {
        <span class="keyword">self</span>.<span class="property">color</span> = color
    }

    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">HStack</span> {
            <span class="type">ForEach</span>(<span class="number">0</span>..&lt;<span class="number">5</span>) { <span class="keyword">_ in</span>
                <span class="type">StarImage</span>()
            }
        }.<span class="call">foregroundColor</span>(color)
    }
}


<span class="keyword">private struct</span> ForegroundStars: <span class="type">View</span> {
    <span class="keyword">var</span> rating: <span class="type">Decimal</span>
    <span class="keyword">var</span> color: <span class="type">Color</span>

    <span class="keyword">init</span>(rating: <span class="type">Decimal</span>, color: <span class="type">Color</span>) {
        <span class="keyword">self</span>.<span class="property">rating</span> = rating
        <span class="keyword">self</span>.<span class="property">color</span> = color
    }

    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">HStack</span> {
            <span class="type">ForEach</span>(<span class="number">0</span>..&lt;<span class="number">5</span>) { index <span class="keyword">in</span>
                <span class="type">RatingStar</span>(
                    rating: <span class="keyword">self</span>.<span class="property">rating</span>,
                    color: <span class="keyword">self</span>.<span class="property">color</span>,
                    index: index
                )
            }
        }
    }
}
</code></pre><br/><h2>Crap!</h2><img class="left-item" style="max-width: 300px;" alt="broken 5 star view" src="../../images/5star_fail.png"/><br/><br/><br/><br/><br/><br/><p>Just a minor detail or two. Let's make sure the images can scale and fit the right aspect ratio:</p><pre><code><span class="keyword">private struct</span> StarImage: <span class="type">View</span> {

    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">Image</span>(systemName: <span class="string">"star.fill"</span>)
            .<span class="call">resizable</span>()
            .<span class="call">aspectRatio</span>(contentMode: .<span class="dotAccess">fill</span>)
    }
}
</code></pre><br/><img class="right-item" style="max-width: 300px;" alt="5 star view" src="../../images/5star_upright.png"/><span class="clear-left"></span><h2>Voila!</h2><p>Like magic! This was a fun little project. In comparison to UIKit (SwiftUI's predecessor), it was far less code and dramatically more enjoyable to create. You can checkout the source code on <a href="https://github.com/JZDesign/FiveStarRating_SwiftUI">Github</a>.</p><p><em>This article was originally posted on Medium</em></p><span class="clearfix" style="overflow:auto;"></span></div><span>Tags: </span><ul class="tag-list"><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/macos">MacOS</a></li><li><a href="/tags/swiftui">SwiftUI</a></li><li><a href="/tags/technology">Technology</a></li><li><a href="/tags/tutorial">Tutorial</a></li><li><a href="/tags/uiux">UI/UX</a></li></ul></article></div><footer><br/><div class="center">
    <p><sm>
    If you enjoy the content on my site and want to support my writing, you can donate <a href="https://ko-fi.com/jacobzivandesign" target="blank">here</a> or <a href="https://github.com/sponsors/JZDesign" target="blank">here.</a>
    </p></sm>
    <p><sm>
    Or if you're a <a href="https://wallet.proton.me" target="blank">Proton Wallet</a> user, you can send coin to donate@jacobzivandesign.com
    </p></sm>
</div><br/><br/><p class="jbmono">Code typeface == <a href="https://www.jetbrains.com/lp/mono/">JetBrains Mono</a></p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p><div class="social"><a target="_blank" class="find-me" href="https://github.com/JZDesign/"><img src="/images/git.svg"/></a><a target="_blank" class="find-me" href="https://bsky.app/profile/jacobzivandesign.bsky.social"><img src="/images/bsky.svg"/></a><a target="_blank" class="find-me" href="https://x.com/JZivanDesign"><img src="/images/x-logo.svg"/></a><a target="_blank" class="find-me" href="https://mastodon.social/@jacobzivandesign"><img src="/images/mastodon.svg"/></a><a target="_blank" class="find-me" href="https://www.linkedin.com/in/jacob-rakidzich-b8722436/"><img src="/images/linkedin.svg"/></a></div><br/></footer></body></html>